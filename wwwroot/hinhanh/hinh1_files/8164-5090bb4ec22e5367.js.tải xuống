"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8164],{8164:function(e,t,s){s.d(t,{h:function(){return m}});var r=s(46796),i=s(33583),n=s(2265),u=s(18238),o=s(86900),h=s(24112),c=s(45345);function a(e,t){return e.filter((e=>!t.includes(e)))}var l=class extends h.l{#e;#t;#s;#r;#i;#n;#u;#o;#h=[];constructor(e,t,s){super(),this.#e=e,this.#r=s,this.#s=[],this.#i=[],this.#t=[],this.setQueries(t)}onSubscribe(){1===this.listeners.size&&this.#i.forEach((e=>{e.subscribe((t=>{this.#c(e,t)}))}))}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#i.forEach((e=>{e.destroy()}))}setQueries(e,t){this.#s=e,this.#r=t,u.Vr.batch((()=>{const e=this.#i,t=this.#a(this.#s);this.#h=t,t.forEach((e=>e.observer.setOptions(e.defaultedQueryOptions)));const s=t.map((e=>e.observer)),r=s.map((e=>e.getCurrentResult())),i=s.some(((t,s)=>t!==e[s]));(e.length!==s.length||i)&&(this.#i=s,this.#t=r,this.hasListeners()&&(a(e,s).forEach((e=>{e.destroy()})),a(s,e).forEach((e=>{e.subscribe((t=>{this.#c(e,t)}))})),this.#l()))}))}getCurrentResult(){return this.#t}getQueries(){return this.#i.map((e=>e.getCurrentQuery()))}getObservers(){return this.#i}getOptimisticResult(e,t){const s=this.#a(e),r=s.map((e=>e.observer.getOptimisticResult(e.defaultedQueryOptions)));return[r,e=>this.#b(e??r,t),()=>this.#f(r,s)]}#f(e,t){return t.map(((s,r)=>{const i=e[r];return s.defaultedQueryOptions.notifyOnChangeProps?i:s.observer.trackResult(i,(e=>{t.forEach((t=>{t.observer.trackProp(e)}))}))}))}#b(e,t){return t?(this.#n&&this.#t===this.#o&&t===this.#u||(this.#u=t,this.#o=this.#t,this.#n=(0,c.Q$)(this.#n,t(e))),this.#n):e}#a(e){const t=new Map(this.#i.map((e=>[e.options.queryHash,e]))),s=[];return e.forEach((e=>{const r=this.#e.defaultQueryOptions(e),i=t.get(r.queryHash);i?s.push({defaultedQueryOptions:r,observer:i}):s.push({defaultedQueryOptions:r,observer:new o.z(this.#e,r)})})),s}#c(e,t){const s=this.#i.indexOf(e);-1!==s&&(this.#t=function(e,t,s){const r=e.slice(0);return r[t]=s,r}(this.#t,s,t),this.#l())}#l(){if(this.hasListeners()){const e=this.#n,t=this.#f(this.#t,this.#h);e!==this.#b(t,this.#r?.combine)&&u.Vr.batch((()=>{this.listeners.forEach((e=>{e(this.#t)}))}))}}},b=s(29827),f=s(14984),p=s(84147),d=s(50674),v=s(58386);function m(e,t){var s=e.queries,h=(0,r._)(e,["queries"]),a=(0,b.NL)(t),m=(0,f.S)(),R=(0,p._)(),y=n.useMemo((function(){return s.map((function(e){var t=a.defaultQueryOptions(e);return t._optimisticResults=m?"isRestoring":"optimistic",t}))}),[s,a,m]);y.forEach((function(e){(0,v.A8)(e),(0,d.pf)(e,R)})),(0,d.JN)(R);var g=(0,i._)(n.useState((function(){return new l(a,y,h)})),1)[0],O=(0,i._)(g.getOptimisticResult(y,h.combine),3),E=O[0],C=O[1],Q=O[2],w=!m&&!1!==h.subscribed;n.useSyncExternalStore(n.useCallback((function(e){return w?g.subscribe(u.Vr.batchCalls(e)):c.ZT}),[g,w]),(function(){return g.getCurrentResult()}),(function(){return g.getCurrentResult()})),n.useEffect((function(){g.setQueries(y,h)}),[y,h,g]);var k=E.some((function(e,t){return(0,v.SB)(y[t],e)}))?E.flatMap((function(e,t){var s=y[t];if(s){var r=new o.z(a,s);if((0,v.SB)(s,e))return(0,v.j8)(s,r,R);(0,v.Z$)(e,m)&&(0,v.j8)(s,r,R)}return[]})):[];if(k.length>0)throw Promise.all(k);var q=E.find((function(e,t){var s=y[t];return s&&(0,d.KJ)({result:e,errorResetBoundary:R,throwOnError:s.throwOnError,query:a.getQueryCache().get(s.queryHash),suspense:s.suspense})}));if(null==q?void 0:q.error)throw q.error;return C(Q())}}}]);